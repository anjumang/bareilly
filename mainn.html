<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anjuman Ghulaman-E-Mustafa</title>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/custom.css" rel="stylesheet">

<style>
.member-link{
    color:#0b4da0;
    cursor:pointer;
    font-weight:600;
    text-decoration:none;
}
.member-link:hover{ text-decoration:underline }

.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.8);
    z-index:9999;
}
.modal-content{
    width:95%;
    height:90vh;
    margin:2% auto;
    background:#fff;
    border-radius:12px;
    overflow:hidden;
}
.modal iframe{
    width:100%;
    height:100%;
    border:none;
}
.close-modal{
    position:absolute;
    right:20px;
    top:15px;
    width:40px;
    height:40px;
    border-radius:50%;
    background:rgba(0,0,0,.6);
    color:#fff;
    font-size:28px;
    text-align:center;
    line-height:40px;
    cursor:pointer;
    z-index:10000;
}
</style>
</head>

<body>

<div class="container-fluid">
    <div class="row" id="dynamic-data"></div>
</div>

<!-- RECEIPT POPUP -->
<div id="receiptModal" class="modal">
    <span class="close-modal" onclick="closeModal()">Ã—</span>
    <div class="modal-content">
        <iframe id="receiptFrame"></iframe>
    </div>
</div>

<script>
function openReceiptModal(uid){
  document.getElementById("receiptFrame").src =
    "https://anjumang.github.io/bareilly/receipt.html?uid=" + encodeURIComponent(uid);
  document.getElementById("receiptModal").style.display="block";
}

const sheetId="1vZjFjqXWbzKjul-Jg0SkEZZMOekmNDTKDw-NWROhBcw";
const apiKey="AIzaSyChkzAQhEqFR5nD9uBzaVO3hHEAr5z2smU";
const range="Sheet1!A2:H";

fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`)
.then(r=>r.json())
.then(d=>{
  const box=document.getElementById("dynamic-data");
  d.values.forEach((row,i)=>{
    if(!row[7]) return;
    box.innerHTML+=`
      <div class="col-md-4">
        <a onclick="openReceiptModal('${row[7]}')">${row[0]}</a>
      </div>`;
  });
});
</script>

</body>
</html>
